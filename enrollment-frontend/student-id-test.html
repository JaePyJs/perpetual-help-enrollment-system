<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student ID Validator Test</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
      }

      h1 {
        color: #e77f33;
      }

      .test-section {
        margin-bottom: 30px;
      }

      pre {
        background-color: #f5f5f5;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
      }

      .valid {
        color: green;
      }

      .invalid {
        color: red;
      }

      .test-case {
        margin-bottom: 15px;
        border-left: 3px solid #e77f33;
        padding-left: 10px;
      }

      input {
        padding: 8px 12px;
        margin-right: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }

      button {
        padding: 8px 16px;
        background-color: #e77f33;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      button:hover {
        background-color: #d06a23;
      }

      #result {
        margin-top: 20px;
        padding: 10px;
        border-radius: 4px;
      }

      #result.valid {
        background-color: #e8f5e9;
      }

      #result.invalid {
        background-color: #ffebee;
      }
    </style>
  </head>
  <body>
    <h1>Student ID Validator Test</h1>

    <div class="test-section">
      <h2>ID Format:</h2>
      <p>Student IDs follow the format: <code>m[YY]-XXXX-XXX</code> where:</p>
      <ul>
        <li><code>m</code> is branch code for Manila</li>
        <li><code>YY</code> is the year of enrollment (e.g., 23 for 2023)</li>
        <li><code>XXXX-XXX</code> is a unique identifier</li>
      </ul>
      <p>Example: <code>m23-1470-578</code></p>
    </div>

    <div class="test-section">
      <h2>Generate a Student ID:</h2>
      <div class="test-case">
        <label for="year-input">Enrollment Year:</label>
        <input
          type="number"
          id="year-input"
          min="1900"
          max="2100"
          value="2023"
        />
        <button onclick="generateId()">Generate ID</button>
        <div id="generation-result"></div>
      </div>
    </div>

    <div class="test-section">
      <h2>Validate a Student ID:</h2>
      <div class="test-case">
        <label for="id-input">Student ID:</label>
        <input type="text" id="id-input" placeholder="e.g. m23-1470-578" />
        <button onclick="validateId()">Validate</button>
        <div id="result"></div>
      </div>
    </div>

    <div class="test-section">
      <h2>Test Cases:</h2>
      <div id="test-cases"></div>
    </div>

    <script src="js/student-id.js"></script>
    <script>
      // Generate a student ID based on input year
      function generateId() {
        const yearInput = document.getElementById("year-input");
        const year = parseInt(yearInput.value);
        const resultDiv = document.getElementById("generation-result");

        if (isNaN(year) || year < 1900 || year > 2100) {
          resultDiv.innerHTML =
            '<span class="invalid">Please enter a valid year between 1900 and 2100</span>';
          return;
        }

        const id = studentIdManager.generateStudentId({ enrollmentYear: year });
        resultDiv.innerHTML = `<p>Generated ID: <code>${id}</code></p>
                            <p>Valid: <span class="${
                              studentIdManager.validateStudentId(id)
                                ? "valid"
                                : "invalid"
                            }">${
          studentIdManager.validateStudentId(id) ? "Yes" : "No"
        }</span></p>`;
      }

      // Validate a student ID from user input
      function validateId() {
        const idInput = document.getElementById("id-input");
        const id = idInput.value.trim();
        const resultDiv = document.getElementById("result");

        const isValid = studentIdManager.validateStudentId(id);
        resultDiv.className = isValid ? "valid" : "invalid";

        if (isValid) {
          const parsed = studentIdManager.parseStudentId(id);
          resultDiv.innerHTML = `
          <h3>✅ Valid Student ID</h3>
          <p>Branch: ${
            parsed.branchCode === "m" ? "Manila" : parsed.branchCode
          }</p>
          <p>Enrollment Year: ${parsed.enrollmentYear}</p>
          <p>Identifier: ${parsed.idFirstPart}-${parsed.idSecondPart}</p>
        `;
        } else {
          resultDiv.innerHTML = `
          <h3>❌ Invalid Student ID</h3>
          <p>Student IDs must follow the format: m[YY]-XXXX-XXX</p>
          <p>Example: m23-1470-578</p>
        `;
        }
      }

      // Test with predefined examples
      function runTestCases() {
        const testCases = [
          {
            id: "m23-1470-578",
            expected: true,
            description: "Valid example from documentation",
          },
          {
            id: "m24-1234-567",
            expected: true,
            description: "Valid ID with different numbers",
          },
          {
            id: "m99-9999-999",
            expected: true,
            description: "Valid ID with all 9s",
          },
          {
            id: "m00-0000-001",
            expected: true,
            description: "Valid ID with mostly 0s",
          },
          {
            id: "m23-1470-57",
            expected: false,
            description: "Missing digit in last part",
          },
          {
            id: "23-1470-578",
            expected: false,
            description: "Missing branch prefix",
          },
          {
            id: "n23-1470-578",
            expected: false,
            description: "Invalid branch code",
          },
          {
            id: "m23-470-578",
            expected: false,
            description: "First part too short",
          },
          {
            id: "m235-1470-578",
            expected: false,
            description: "Year part too long",
          },
          {
            id: "m23_1470_578",
            expected: false,
            description: "Invalid separators",
          },
        ];

        const testCasesDiv = document.getElementById("test-cases");
        let html = "";

        testCases.forEach((test, index) => {
          const result = studentIdManager.validateStudentId(test.id);
          const passed = result === test.expected;

          html += `
          <div class="test-case">
            <p><strong>Test ${index + 1}:</strong> ${test.description}</p>
            <p>ID: <code>${test.id}</code></p>
            <p>Expected: ${test.expected ? "Valid" : "Invalid"}</p>
            <p>Result: <span class="${passed ? "valid" : "invalid"}">${
            result ? "Valid" : "Invalid"
          }</span></p>
            <p>Test ${passed ? "passed ✅" : "failed ❌"}</p>
          </div>
        `;
        });

        testCasesDiv.innerHTML = html;
      }

      // Run tests when page loads
      document.addEventListener("DOMContentLoaded", runTestCases);
    </script>
  </body>
</html>
